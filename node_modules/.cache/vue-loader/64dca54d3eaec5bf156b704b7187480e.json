{"remainingRequest":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catangui/Documents/GitHub/er-resistance/src/components/Modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catangui/Documents/GitHub/er-resistance/src/components/Modal.vue","mtime":1613513801542},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/babel-loader/lib/index.js","mtime":1607551081139},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js","mtime":1607551087951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBaXJ0YWJsZSBmcm9tICJhaXJ0YWJsZSI7Cgpjb25zdCBiYXNlID0gbmV3IEFpcnRhYmxlKAogIHsKICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9BSVJUQUJMRV9BUElfS0VZCiAgfQopLmJhc2UocHJvY2Vzcy5lbnYuVlVFX0FQUF9BSVJUQUJMRV9CQVNFKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBtZXRob2RzOiB7CiAgICBhZGRQZXJzcGVjdGl2ZSgpIHsKICAgICAgY29uc3QgY2hlY2tlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImluaXRpYWxPcGluaW9uIl06Y2hlY2tlZCcpOwogICAgICBjb25zdCB0ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykudmFsdWU7CiAgICAgIGlmICghY2hlY2tlZEJ1dHRvbiAmJiAhdGV4dENvbnRlbnQpIHsKICAgICAgICAvLyBOb3RoaW5nIGhhcyBiZWVuIGNoZWNrZWQgb3IgZmlsbGVkLiBTaG93IGVycm9yIHN0YXRlCiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHt9OwogICAgICAgIGlmICh0ZXh0Q29udGVudCkgewogICAgICAgICAgZGF0YVsiUG9wVXAyIl0gPSB0ZXh0Q29udGVudDsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5wb3BVcDIgPSBkYXRhWyJQb3BVcDIiXTsKICAgICAgICB9CiAgICAgICAgaWYgKGNoZWNrZWRCdXR0b24pIHsKICAgICAgICAgIGRhdGFbIlBvcFVwMSJdID0gY2hlY2tlZEJ1dHRvbi52YWx1ZTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5wb3BVcDEgPSBkYXRhWyJQb3BVcDEiXTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgdGhpcy5zdWJtaXQoZGF0YSk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiLCB0cnVlKTsKICAgIH0sCiAgICBzdWJtaXQoZGF0YSkgewogICAgICAgIGJhc2UoJ1N1cnZleSBSZXN1bHRzJykuY3JlYXRlKFsKICAgICAgICB7CiAgICAgICAgICAiZmllbGRzIjogewogICAgICAgICAgICAiU3VibWlzc2lvbiBJRCI6IERhdGUubm93KCksCiAgICAgICAgICAgIC4uLmRhdGEKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIF0sIGZ1bmN0aW9uKGVyciwgcmVjb3JkcykgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlY29yZC5nZXRJZCgpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIiwgdHJ1ZSk7CiAgICB9CiAgfSwKICBwcm9wczogWyd0aXRsZSddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNFcnJvcjogZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Modal.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"container\">\n  <div class=\"overlay\"></div>\n  <div class=\"modal\">\n    <h2> {{ title }}</h2>\n    <p>Read our privacy policy <a href=\"#\">here</a></p>\n    <form action=\"\">\n      <p>Have you heard of ‘emotion recognition systems’?</p>\n      <div class=\"yn\">\n        <input type=\"radio\" name=\"initialOpinion\" value=\"Yes\">\n        <label>Yes</label>\n      </div>\n      <div class=\"yn\">\n        <input type=\"radio\" name=\"initialOpinion\" value=\"No\">\n        <label>No</label>\n      </div>\n        <p>\n          <label>What do you understand by the term ‘emotion recognition systems’?</label>\n          <textarea rows=\"5\" placeholder=\"Please explain.\"></textarea>\n        </p>\n    </form>\n    <div class=\"button-group\">\n      <button @click=\"close\">Skip</button>\n      <button @click=\"addPerspective\">Add my perspective</button>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Airtable from \"airtable\";\n\nconst base = new Airtable(\n  {\n    apiKey: process.env.VUE_APP_AIRTABLE_API_KEY\n  }\n).base(process.env.VUE_APP_AIRTABLE_BASE);\n\nexport default {\n  methods: {\n    addPerspective() {\n      const checkedButton = document.querySelector('input[name=\"initialOpinion\"]:checked');\n      const textContent = document.querySelector('textarea').value;\n      if (!checkedButton && !textContent) {\n        // Nothing has been checked or filled. Show error state\n        this.hasError = true;\n      }\n      else {\n        const data = {};\n        if (textContent) {\n          data[\"PopUp2\"] = textContent;\n          localStorage.popUp2 = data[\"PopUp2\"];\n        }\n        if (checkedButton) {\n          data[\"PopUp1\"] = checkedButton.value;\n          localStorage.popUp1 = data[\"PopUp1\"];\n        }\n        console.log(data);\n        this.submit(data);\n      }\n      this.$emit(\"close\", true);\n    },\n    submit(data) {\n        base('Survey Results').create([\n        {\n          \"fields\": {\n            \"Submission ID\": Date.now(),\n            ...data\n          }\n        }\n      ], function(err, records) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        records.forEach(function (record) {\n          console.log(record.getId());\n        });\n      });\n    },\n    close() {\n      this.$emit(\"close\", true);\n    }\n  },\n  props: ['title'],\n  data() {\n    return {\n      hasError: false\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.modal {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background: $yellow;\n  padding: 1em 2em 2em;\n  border-radius: $br-m;\n  border: 2px solid black;\n  z-index: 2;\n\n  h2 {\n    line-height: 1.5em;\n  }\n\n  a {\n    text-decoration: underline;\n  }\n\n  h3 {\n    text-align: left;\n    font-size: 12px;\n    line-height: 1.7em;\n  }\n\n  form {\n    text-align: left;\n\n    .yn {\n      display: inline-block;\n      margin-bottom: 2rem;\n      width: 40%;\n\n      input {\n        margin-right: 1em;\n\n        &:hover {\n          cursor: pointer;\n        }\n      }\n    }\n\n    p {\n      textarea {\n        display: block;\n        width: 100%;\n        border: 2px solid black;\n        background: $yellow;\n        margin-top: 1em;\n        padding: 0.75em 1em;\n        box-sizing: border-box;\n        font-family: inherit;\n        color: $gray-1;\n      }\n    }\n  }\n\n  div.button-group {\n    margin-top: 2em;\n    display: flex;\n    justify-content: center;\n\n    button {\n      margin-left: 1em;\n    }\n  }\n}\n\n.overlay {\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #171717;\n    opacity: 0.95;\n    z-index: 2;\n}\n</style>"]}]}