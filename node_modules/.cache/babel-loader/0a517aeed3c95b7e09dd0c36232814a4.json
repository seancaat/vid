{"remainingRequest":"/Users/catangui/Documents/GitHub/vid/node_modules/babel-loader/lib/index.js!/Users/catangui/Documents/GitHub/vid/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/catangui/Documents/GitHub/vid/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catangui/Documents/GitHub/vid/src/components/LiveVideo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catangui/Documents/GitHub/vid/src/components/LiveVideo.vue","mtime":1613617182647},{"path":"/Users/catangui/Documents/GitHub/vid/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/vid/node_modules/babel-loader/lib/index.js","mtime":1607551081139},{"path":"/Users/catangui/Documents/GitHub/vid/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/vid/node_modules/vue-loader/lib/index.js","mtime":1607551087951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgZmFjZWFwaSBmcm9tICJmYWNlLWFwaS5qcyI7CmNvbnN0IG1pbkNvbmZpZGVuY2VGYWNlID0gMC41Owpjb25zdCBmYWNlYXBpT3B0aW9ucyA9IG5ldyBmYWNlYXBpLlNzZE1vYmlsZW5ldHYxT3B0aW9ucyh7CiAgbWluQ29uZmlkZW5jZUZhY2UKfSk7CmxldCBjYW07CmxldCBpc1J1bm5pbmcgPSB0cnVlOwpsZXQgd2l0aEJveGVzID0gdHJ1ZTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXZlVmlkZW8iLAogIHByb3BzOiBbImJ1dHRvblZpc2libGUiLCAiZGV0ZWN0T25Mb2FkIl0sCiAgbWV0YUluZm86IHsKICAgIHRpdGxlOiAiTGl2ZSBWaWRlbyIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FtOiBudWxsLAogICAgICBkaXNwbGF5U2l6ZTogbnVsbCwKICAgICAgZGVuaWVkOiBmYWxzZQogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgbGV0IGxvYWROZXQgPSBhc3luYyAoKSA9PiB7CiAgICAgIGxldCBkZXRlY3Rpb25OZXQgPSBmYWNlYXBpLm5ldHMuc3NkTW9iaWxlbmV0djE7CiAgICAgIGF3YWl0IGRldGVjdGlvbk5ldC5sb2FkKCIvbW9kZWxzIik7CiAgICAgIGF3YWl0IGZhY2VhcGkubG9hZEZhY2VFeHByZXNzaW9uTW9kZWwoIi9tb2RlbHMiKTsKICAgICAgcmV0dXJuIGRldGVjdGlvbk5ldDsKICAgIH07CgogICAgY29uc3QgaW5pdENhbWVyYSA9IGFzeW5jICh3aWR0aCwgaGVpZ2h0KSA9PiB7CiAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIndlYmNhbSIpOwogICAgICB2aWRlby53aWR0aCA9IHdpZHRoOwogICAgICB2aWRlby5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMuZGlzcGxheVNpemUgPSB7CiAgICAgICAgd2lkdGg6IHZpZGVvLndpZHRoLAogICAgICAgIGhlaWdodDogdmlkZW8uaGVpZ2h0CiAgICAgIH07CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdmVybGF5Iik7CiAgICAgIGZhY2VhcGkubWF0Y2hEaW1lbnNpb25zKGNhbnZhcywgdGhpcy5kaXNwbGF5U2l6ZSk7CiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgICBhdWRpbzogZmFsc2UsCiAgICAgICAgdmlkZW86IHsKICAgICAgICAgIGZhY2luZ01vZGU6ICJ1c2VyIiwKICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgIGhlaWdodDogaGVpZ2h0CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jYW0iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiYmxhY2siOwogICAgICAgIHRoaXMuZGVuaWVkID0gdHJ1ZTsKICAgICAgfSk7CiAgICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIHZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSAoKSA9PiB7CiAgICAgICAgICByZXNvbHZlKHZpZGVvKTsKICAgICAgICB9OwogICAgICB9KTsKICAgIH07CgogICAgbG9hZE5ldCgpLnRoZW4obmV0ID0+IHsKICAgICAgcmV0dXJuIGluaXRDYW1lcmEoNjAwLCA1MDApOwogICAgfSkudGhlbih2aWRlbyA9PiB7CiAgICAgIHRoaXMuY2FtID0gdmlkZW87CgogICAgICBpZiAodGhpcy5kZXRlY3RPbkxvYWQpIHsKICAgICAgICB0aGlzLmRldGVjdEV4cHJlc3Npb25zKCk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIGRlc3Ryb3llZCgpIHsKICAgIGNvbnN0IG1lZGlhU3RyZWFtID0gdGhpcy5jYW0uc3JjT2JqZWN0OwogICAgY29uc3QgdHJhY2tzID0gbWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCk7CiAgICB0cmFja3MuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGRldGVjdEV4cHJlc3Npb25zKCkgewogICAgICBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CiAgICAgICAgLy8gZGV0ZWN0IGV4cHJlc3Npb24KICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmYWNlYXBpLmRldGVjdFNpbmdsZUZhY2UodGhpcy5jYW0sIGZhY2VhcGlPcHRpb25zKS53aXRoRmFjZUV4cHJlc3Npb25zKCk7CgogICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgY29uc3QgcmVzaXplZFJlc3VsdCA9IGZhY2VhcGkucmVzaXplUmVzdWx0cyhyZXN1bHQsIHsKICAgICAgICAgICAgd2lkdGg6IHRoaXMuY2FtLndpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IHRoaXMuY2FtLmhlaWdodAogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3ZlcmxheSIpOwogICAgICAgICAgY2FudmFzLmdldENvbnRleHQoIjJkIikuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICBmYWNlYXBpLmRyYXcuZHJhd0RldGVjdGlvbnMoY2FudmFzLCByZXNpemVkUmVzdWx0KTsKICAgICAgICAgIGZhY2VhcGkuZHJhdy5kcmF3RmFjZUV4cHJlc3Npb25zKGNhbnZhcywgcmVzaXplZFJlc3VsdCwgZmFjZWFwaU9wdGlvbnMubWluQ29uZmlkZW5jZUZhY2UpOwogICAgICAgICAgbGV0IGhhcHBpbmVzcyA9IDAsCiAgICAgICAgICAgICAgYW5nZXIgPSAwLAogICAgICAgICAgICAgIHNhZG5lc3MgPSAwLAogICAgICAgICAgICAgIHN1cnByaXNlID0gMCwKICAgICAgICAgICAgICBmZWFyID0gMCwKICAgICAgICAgICAgICBkaXNndXN0ID0gMDsKCiAgICAgICAgICBpZiAocmVzdWx0LmV4cHJlc3Npb25zLmhhc093blByb3BlcnR5KCJoYXBweSIpKSB7CiAgICAgICAgICAgIGhhcHBpbmVzcyA9IHJlc3VsdC5leHByZXNzaW9ucy5oYXBweTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVzdWx0LmV4cHJlc3Npb25zLmhhc093blByb3BlcnR5KCJhbmdyeSIpKSB7CiAgICAgICAgICAgIGFuZ2VyID0gcmVzdWx0LmV4cHJlc3Npb25zLmFuZ3J5OwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXN1bHQuZXhwcmVzc2lvbnMuaGFzT3duUHJvcGVydHkoInNhZCIpKSB7CiAgICAgICAgICAgIHNhZG5lc3MgPSByZXN1bHQuZXhwcmVzc2lvbnMuc2FkOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXN1bHQuZXhwcmVzc2lvbnMuaGFzT3duUHJvcGVydHkoImZlYXJmdWwiKSkgewogICAgICAgICAgICBmZWFyID0gcmVzdWx0LmV4cHJlc3Npb25zLmZlYXJmdWw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3VsdC5leHByZXNzaW9ucy5oYXNPd25Qcm9wZXJ0eSgiZGlzZ3VzdGVkIikpIHsKICAgICAgICAgICAgZGlzZ3VzdCA9IHJlc3VsdC5leHByZXNzaW9ucy5kaXNndXN0ZWQ7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3VsdC5leHByZXNzaW9ucy5oYXNPd25Qcm9wZXJ0eSgic3VycHJpc2VkIikpIHsKICAgICAgICAgICAgc3VycHJpc2UgPSByZXN1bHQuZXhwcmVzc2lvbnMuc3VycHJpc2VkOwogICAgICAgICAgfSAvLyBpbnRlcmZhY2UgcmVzcG9uZHMKCgogICAgICAgICAgaWYgKGhhcHBpbmVzcyA+IDAuNjUpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoYXBwaW5lc3MiKSkgewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoYXBwaW5lc3MiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI0RDRENEQyI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoYW5nZXIgPiAwLjY1KSB7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYW5nZXIiKSkgewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbmdlciIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjRENEQ0RDIjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChzYWRuZXNzID4gMC42NSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNhZG5lc3MiKSkgewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzYWRuZXNzIikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNEQ0RDREMiOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHN1cnByaXNlID4gMC42NSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN1cnByaXNlIikpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3VycHJpc2UiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI0RDRENEQyI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoZGlzZ3VzdCA+IDAuNjUpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkaXNndXN0IikpIHsKICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlzZ3VzdCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjRENEQ0RDIjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChmZWFyID4gMC42NSkgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlYXIiKSkgewogICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWFyIikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNEQ0RDREMiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCAxMDApOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["LiveVideo.vue"],"names":[],"mappings":";;;;;;;;;;;;AAaA,OAAA,KAAA,OAAA,MAAA,aAAA;AAEA,MAAA,iBAAA,GAAA,GAAA;AACA,MAAA,cAAA,GAAA,IAAA,OAAA,CAAA,qBAAA,CAAA;AAAA,EAAA;AAAA,CAAA,CAAA;AAEA,IAAA,GAAA;AACA,IAAA,SAAA,GAAA,IAAA;AACA,IAAA,SAAA,GAAA,IAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA,CAAA,eAAA,EAAA,cAAA,CAFA;AAGA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAHA;;AAMA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAZA;;AAaA,EAAA,OAAA,GAAA;AACA,QAAA,OAAA,GAAA,YAAA;AACA,UAAA,YAAA,GAAA,OAAA,CAAA,IAAA,CAAA,cAAA;AACA,YAAA,YAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,YAAA,OAAA,CAAA,uBAAA,CAAA,SAAA,CAAA;AACA,aAAA,YAAA;AACA,KALA;;AAOA,UAAA,UAAA,GAAA,OAAA,KAAA,EAAA,MAAA,KAAA;AACA,YAAA,KAAA,GAAA,QAAA,CAAA,cAAA,CAAA,QAAA,CAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,MAAA;AAEA,WAAA,WAAA,GAAA;AAAA,QAAA,KAAA,EAAA,KAAA,CAAA,KAAA;AAAA,QAAA,MAAA,EAAA,KAAA,CAAA;AAAA,OAAA;AACA,YAAA,MAAA,GAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA;AACA,MAAA,OAAA,CAAA,eAAA,CAAA,MAAA,EAAA,KAAA,WAAA;AAEA,YAAA,MAAA,GAAA,MAAA,SAAA,CAAA,YAAA,CAAA,YAAA,CAAA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,UAAA,EAAA,MADA;AAEA,UAAA,KAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA;AAHA;AAFA,OAAA,EAOA,KAPA,CAOA,KAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,QAAA,QAAA,CAAA,aAAA,CAAA,MAAA,EAAA,KAAA,CAAA,eAAA,GAAA,OAAA;AACA,aAAA,MAAA,GAAA,IAAA;AACA,OAXA,CAAA;AAaA,MAAA,KAAA,CAAA,SAAA,GAAA,MAAA;AACA,aAAA,IAAA,OAAA,CAAA,OAAA,IAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,MAAA;AACA,UAAA,OAAA,CAAA,KAAA,CAAA;AACA,SAFA;AAGA,OAJA,CAAA;AAKA,KA5BA;;AA8BA,IAAA,OAAA,GACA,IADA,CACA,GAAA,IAAA;AACA,aAAA,UAAA,CAAA,GAAA,EAAA,GAAA,CAAA;AACA,KAHA,EAIA,IAJA,CAIA,KAAA,IAAA;AACA,WAAA,GAAA,GAAA,KAAA;;AACA,UAAA,KAAA,YAAA,EAAA;AACA,aAAA,iBAAA;AACA;AACA,KATA;AAUA,GA7DA;;AA8DA,EAAA,SAAA,GAAA;AACA,UAAA,WAAA,GAAA,KAAA,GAAA,CAAA,SAAA;AACA,UAAA,MAAA,GAAA,WAAA,CAAA,SAAA,EAAA;AAEA,IAAA,MAAA,CAAA,OAAA,CAAA,KAAA,IAAA,KAAA,CAAA,IAAA,EAAA;AACA,GAnEA;;AAoEA,EAAA,OAAA,EAAA;AACA,UAAA,iBAAA,GAAA;AAEA,MAAA,WAAA,CAAA,YAAA;AACA;AACA,cAAA,MAAA,GAAA,MAAA,OAAA,CACA,gBADA,CACA,KAAA,GADA,EACA,cADA,EAEA,mBAFA,EAAA;;AAIA,YAAA,OAAA,MAAA,KAAA,WAAA,EAAA;AACA,gBAAA,aAAA,GAAA,OAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACA,YAAA,KAAA,EAAA,KAAA,GAAA,CAAA,KADA;AAEA,YAAA,MAAA,EAAA,KAAA,GAAA,CAAA;AAFA,WAAA,CAAA;AAKA,gBAAA,MAAA,GAAA,QAAA,CACA,cADA,CACA,SADA,CAAA;AAEA,UAAA,MAAA,CACA,UADA,CACA,IADA,EAEA,SAFA,CAGA,CAHA,EAIA,CAJA,EAKA,MAAA,CAAA,KALA,EAMA,MAAA,CAAA,MANA;AAQA,UAAA,OAAA,CAAA,IAAA,CAAA,cAAA,CACA,MADA,EAEA,aAFA;AAIA,UAAA,OAAA,CAAA,IAAA,CAAA,mBAAA,CACA,MADA,EAEA,aAFA,EAGA,cAAA,CAAA,iBAHA;AAMA,cAAA,SAAA,GAAA,CAAA;AAAA,cACA,KAAA,GAAA,CADA;AAAA,cAEA,OAAA,GAAA,CAFA;AAAA,cAGA,QAAA,GAAA,CAHA;AAAA,cAIA,IAAA,GAAA,CAJA;AAAA,cAKA,OAAA,GAAA,CALA;;AAMA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA;AACA,YAAA,SAAA,GAAA,MAAA,CAAA,WAAA,CAAA,KAAA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA;AACA,YAAA,KAAA,GAAA,MAAA,CAAA,WAAA,CAAA,KAAA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,KAAA,CAAA,EAAA;AACA,YAAA,OAAA,GAAA,MAAA,CAAA,WAAA,CAAA,GAAA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,IAAA,GAAA,MAAA,CAAA,WAAA,CAAA,OAAA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,WAAA,CAAA,EAAA;AACA,YAAA,OAAA,GAAA,MAAA,CAAA,WAAA,CAAA,SAAA;AACA;;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,cAAA,CAAA,WAAA,CAAA,EAAA;AACA,YAAA,QAAA,GAAA,MAAA,CAAA,WAAA,CAAA,SAAA;AACA,WAjDA,CAmDA;;;AACA,cAAA,SAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,WAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,WAAA,EAAA,KAAA,CAAA,eAAA,GACA,SADA;AAEA;AACA,WALA,MAKA,IAAA,KAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,OAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,OAAA,EAAA,KAAA,CAAA,eAAA,GAAA,SAAA;AACA;AACA,WAJA,MAIA,IAAA,OAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,SAAA,EAAA,KAAA,CAAA,eAAA,GACA,SADA;AAEA;AACA,WALA,MAKA,IAAA,QAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,UAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,UAAA,EAAA,KAAA,CAAA,eAAA,GACA,SADA;AAEA;AACA,WALA,MAKA,IAAA,OAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,SAAA,EAAA,KAAA,CAAA,eAAA,GACA,SADA;AAEA;AACA,WALA,MAKA,IAAA,IAAA,GAAA,IAAA,EAAA;AACA,gBAAA,QAAA,CAAA,cAAA,CAAA,MAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,cAAA,CAAA,MAAA,EAAA,KAAA,CAAA,eAAA,GAAA,SAAA;AACA;AACA;AACA;AACA,OAxFA,EAwFA,GAxFA,CAAA;AAyFA;;AA5FA;AApEA,CAAA","sourcesContent":["<template>\n <div>\n   <div class=\"cam\">\n      <video id=\"webcam\" autoplay muted playsinline />\n      <canvas id=\"overlay\"></canvas>\n      <img v-if=\"denied\" id=\"placeholder\" src=\"@/assets/images/smiley.png\">\n      <router-link v-if=\"denied\" class=\"help-link\" to=\"help\">Grant webcam access</router-link>\n   </div>\n    <button v-if=\"buttonVisible\" v-on:click=\"detectExpressions\">Turn on ER camera</button>\n  </div>\n</template>\n\n<script>\nimport * as faceapi from \"face-api.js\";\n\nconst minConfidenceFace = 0.5;\nconst faceapiOptions = new faceapi.SsdMobilenetv1Options({ minConfidenceFace });\n\nlet cam;\nlet isRunning = true;\nlet withBoxes = true;\n\nexport default {\n  name: \"LiveVideo\",\n  props: [\"buttonVisible\", \"detectOnLoad\"],\n  metaInfo: {\n    title: \"Live Video\"\n  },\n  data() {\n    return {\n      cam: null,\n      displaySize: null,\n      denied: false\n    }\n  },\n  mounted() {\n    let loadNet = async () => {\n      let detectionNet = faceapi.nets.ssdMobilenetv1;\n      await detectionNet.load(\"/models\");\n      await faceapi.loadFaceExpressionModel(\"/models\");\n      return detectionNet;\n    };\n\n    const initCamera = async (width, height) => {\n      const video = document.getElementById(\"webcam\");\n      video.width = width;\n      video.height = height;\n\n      this.displaySize = { width: video.width, height: video.height };\n      const canvas = document.getElementById(\"overlay\");\n      faceapi.matchDimensions(canvas, this.displaySize);\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: false,\n        video: {\n          facingMode: \"user\",\n          width: width,\n          height: height\n        }\n      }).catch(error => {\n          console.log(error);\n          document.querySelector(\".cam\").style.backgroundColor = \"black\";\n          this.denied = true;\n        });\n\n      video.srcObject = stream;\n      return new Promise(resolve => {\n        video.onloadedmetadata = () => {\n          resolve(video);\n        };\n      });\n    };\n\n    loadNet()\n      .then(net => {\n        return initCamera(600, 500);\n      })\n      .then(video => {\n        this.cam = video;\n        if (this.detectOnLoad) {\n          this.detectExpressions();\n        }\n      });\n  },\n  destroyed () {\n    const mediaStream = this.cam.srcObject;\n    const tracks = mediaStream.getTracks();\n\n    tracks.forEach(track => track.stop())\n  },\n  methods: {\n    async detectExpressions() {\n\n      setInterval(async () => {\n        // detect expression\n        const result = await faceapi\n          .detectSingleFace(this.cam, faceapiOptions)\n          .withFaceExpressions();\n\n        if (typeof result !== \"undefined\") {\n          const resizedResult = faceapi.resizeResults(result, {\n            width: this.cam.width,\n            height: this.cam.height\n          });\n\n        const canvas = document\n            .getElementById(\"overlay\");\n         canvas\n            .getContext(\"2d\")\n            .clearRect(\n              0,\n              0,\n              canvas.width,\n              canvas.height\n            );\n          faceapi.draw.drawDetections(\n            canvas,\n            resizedResult\n          );\n          faceapi.draw.drawFaceExpressions(\n            canvas,\n            resizedResult,\n            faceapiOptions.minConfidenceFace\n          );\n\n          let happiness = 0,\n            anger = 0,\n            sadness = 0,\n            surprise = 0,\n            fear = 0,\n            disgust = 0;\n          if (result.expressions.hasOwnProperty(\"happy\")) {\n            happiness = result.expressions.happy;\n          }\n          if (result.expressions.hasOwnProperty(\"angry\")) {\n            anger = result.expressions.angry;\n          }\n          if (result.expressions.hasOwnProperty(\"sad\")) {\n            sadness = result.expressions.sad;\n          }\n          if (result.expressions.hasOwnProperty(\"fearful\")) {\n            fear = result.expressions.fearful;\n          }\n          if (result.expressions.hasOwnProperty(\"disgusted\")) {\n            disgust = result.expressions.disgusted;\n          }\n          if (result.expressions.hasOwnProperty(\"surprised\")) {\n            surprise = result.expressions.surprised;\n          }\n\n          // interface responds\n          if (happiness > 0.65) {\n            if (document.getElementById(\"happiness\")) {\n              document.getElementById(\"happiness\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (anger > 0.65) {\n            if (document.getElementById(\"anger\")) {\n              document.getElementById(\"anger\").style.backgroundColor = \"#DCDCDC\";\n            }\n          } else if (sadness > 0.65) {\n            if (document.getElementById(\"sadness\")) {\n              document.getElementById(\"sadness\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (surprise > 0.65) {\n            if (document.getElementById(\"surprise\")) {\n              document.getElementById(\"surprise\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (disgust > 0.65) {\n            if (document.getElementById(\"disgust\")) {\n              document.getElementById(\"disgust\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (fear > 0.65) {\n            if (document.getElementById(\"fear\")) {\n              document.getElementById(\"fear\").style.backgroundColor = \"#DCDCDC\";\n            }\n          }\n        }\n      }, 100);\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\ndiv {\n  height: 100%;\n  position: relative;\n  box-sizing: border-box;\n\n  .cam {\n    overflow: hidden;\n  }\n\n  video {\n    // position: absolute; \n    right: 0; \n    bottom: 0;\n    min-width: 100%; \n    min-height: 100%;\n    width: auto; \n    height: auto; \n\n    background-size: cover;\n  }\n\n  img {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  #overlay,\n  .overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  button {\n    position: relative;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    border-radius: $br-m;\n  }\n\n  .help-link {\n    position: absolute;\n    display: block;\n    width: 100%;\n    text-align: center;\n    text-decoration: underline;\n    color: white;\n    bottom: 20%;\n  }\n}\n\n</style>"],"sourceRoot":"src/components"}]}