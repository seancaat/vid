{"remainingRequest":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/babel-loader/lib/index.js!/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catangui/Documents/GitHub/er-resistance/src/components/LiveVideo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catangui/Documents/GitHub/er-resistance/src/components/LiveVideo.vue","mtime":1611807761956},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/babel-loader/lib/index.js","mtime":1607551081139},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js","mtime":1607551087951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvY2F0YW5ndWkvRG9jdW1lbnRzL0dpdEh1Yi9lci1yZXNpc3RhbmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgZmFjZWFwaSBmcm9tICJmYWNlLWFwaS5qcyI7CnZhciBtaW5Db25maWRlbmNlRmFjZSA9IDAuNTsKdmFyIGZhY2VhcGlPcHRpb25zID0gbmV3IGZhY2VhcGkuU3NkTW9iaWxlbmV0djFPcHRpb25zKHsKICBtaW5Db25maWRlbmNlRmFjZTogbWluQ29uZmlkZW5jZUZhY2UKfSk7CnZhciBjYW07CnZhciBpc1J1bm5pbmcgPSB0cnVlOwp2YXIgd2l0aEJveGVzID0gdHJ1ZTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXZlVmlkZW8iLAogIHByb3BzOiBbImJ1dHRvblZpc2libGUiLCAiZGV0ZWN0T25Mb2FkIl0sCiAgbWV0YUluZm86IHsKICAgIHRpdGxlOiAiTGl2ZSBWaWRlbyIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYW06IG51bGwsCiAgICAgIGRpc3BsYXlTaXplOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGxvYWROZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGV0ZWN0aW9uTmV0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRldGVjdGlvbk5ldCA9IGZhY2VhcGkubmV0cy5zc2RNb2JpbGVuZXR2MTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGRldGVjdGlvbk5ldC5sb2FkKCIvbW9kZWxzIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGZhY2VhcGkubG9hZEZhY2VFeHByZXNzaW9uTW9kZWwoIi9tb2RlbHMiKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGV0ZWN0aW9uTmV0KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBsb2FkTmV0KCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGluaXRDYW1lcmEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICB2YXIgdmlkZW8sIGNhbnZhcywgc3RyZWFtOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2aWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ3ZWJjYW0iKTsKICAgICAgICAgICAgICAgIHZpZGVvLndpZHRoID0gd2lkdGg7CiAgICAgICAgICAgICAgICB2aWRlby5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgICAgICAgICBfdGhpcy5kaXNwbGF5U2l6ZSA9IHsKICAgICAgICAgICAgICAgICAgd2lkdGg6IHZpZGVvLndpZHRoLAogICAgICAgICAgICAgICAgICBoZWlnaHQ6IHZpZGVvLmhlaWdodAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdmVybGF5Iik7CiAgICAgICAgICAgICAgICBmYWNlYXBpLm1hdGNoRGltZW5zaW9ucyhjYW52YXMsIF90aGlzLmRpc3BsYXlTaXplKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgICAgICAgICAgICAgIGF1ZGlvOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdmlkZW86IHsKICAgICAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiAidXNlciIsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBzdHJlYW0gPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICB2aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmlkZW8pOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRDYW1lcmEoX3gsIF94MikgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIGxvYWROZXQoKS50aGVuKGZ1bmN0aW9uIChuZXQpIHsKICAgICAgcmV0dXJuIGluaXRDYW1lcmEoNjAwLCA1MDApOwogICAgfSkudGhlbihmdW5jdGlvbiAodmlkZW8pIHsKICAgICAgX3RoaXMuY2FtID0gdmlkZW87CgogICAgICBpZiAoX3RoaXMuZGV0ZWN0T25Mb2FkKSB7CiAgICAgICAgX3RoaXMuZGV0ZWN0RXhwcmVzc2lvbnMoKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZXRlY3RFeHByZXNzaW9uczogZnVuY3Rpb24gZGV0ZWN0RXhwcmVzc2lvbnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHNldEludGVydmFsKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCwgcmVzaXplZFJlc3VsdCwgY2FudmFzLCBoYXBwaW5lc3MsIGFuZ2VyLCBzYWRuZXNzLCBzdXJwcmlzZSwgZmVhciwgZGlzZ3VzdDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhY2VhcGkuZGV0ZWN0U2luZ2xlRmFjZShfdGhpczIuY2FtLCBmYWNlYXBpT3B0aW9ucykud2l0aEZhY2VFeHByZXNzaW9ucygpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZWRSZXN1bHQgPSBmYWNlYXBpLnJlc2l6ZVJlc3VsdHMocmVzdWx0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBfdGhpczIuY2FtLndpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IF90aGlzMi5jYW0uaGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdmVybGF5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VhcGkuZHJhdy5kcmF3RGV0ZWN0aW9ucyhjYW52YXMsIHJlc2l6ZWRSZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZWFwaS5kcmF3LmRyYXdGYWNlRXhwcmVzc2lvbnMoY2FudmFzLCByZXNpemVkUmVzdWx0LCBmYWNlYXBpT3B0aW9ucy5taW5Db25maWRlbmNlRmFjZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXBwaW5lc3MgPSAwLCBhbmdlciA9IDAsIHNhZG5lc3MgPSAwLCBzdXJwcmlzZSA9IDAsIGZlYXIgPSAwLCBkaXNndXN0ID0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmV4cHJlc3Npb25zLmhhc093blByb3BlcnR5KCJoYXBweSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhcHBpbmVzcyA9IHJlc3VsdC5leHByZXNzaW9ucy5oYXBweTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmV4cHJlc3Npb25zLmhhc093blByb3BlcnR5KCJhbmdyeSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2VyID0gcmVzdWx0LmV4cHJlc3Npb25zLmFuZ3J5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXhwcmVzc2lvbnMuaGFzT3duUHJvcGVydHkoInNhZCIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZG5lc3MgPSByZXN1bHQuZXhwcmVzc2lvbnMuc2FkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXhwcmVzc2lvbnMuaGFzT3duUHJvcGVydHkoImZlYXJmdWwiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWFyID0gcmVzdWx0LmV4cHJlc3Npb25zLmZlYXJmdWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5leHByZXNzaW9ucy5oYXNPd25Qcm9wZXJ0eSgiZGlzZ3VzdGVkIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzZ3VzdCA9IHJlc3VsdC5leHByZXNzaW9ucy5kaXNndXN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5leHByZXNzaW9ucy5oYXNPd25Qcm9wZXJ0eSgic3VycHJpc2VkIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VycHJpc2UgPSByZXN1bHQuZXhwcmVzc2lvbnMuc3VycHJpc2VkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBpbnRlcmZhY2UgcmVzcG9uZHMKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhcHBpbmVzcyA+IDAuNjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoYXBwaW5lc3MiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJoYXBwaW5lc3MiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI0RDRENEQyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5nZXIgPiAwLjY1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYW5nZXIiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbmdlciIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjRENEQ0RDIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzYWRuZXNzID4gMC42NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNhZG5lc3MiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzYWRuZXNzIikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNEQ0RDREMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cnByaXNlID4gMC42NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN1cnByaXNlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3VycHJpc2UiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiI0RDRENEQyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzZ3VzdCA+IDAuNjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkaXNndXN0IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGlzZ3VzdCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjRENEQ0RDIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmZWFyID4gMC42NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlYXIiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWFyIikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gIiNEQ0RDREMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgfSkpLCAxMDApOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["LiveVideo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n <div>\n   <div class=\"cam\">\n      <video id=\"webcam\" autoplay muted playsinline />\n      <canvas id=\"overlay\"></canvas>\n   </div>\n    <button v-if=\"buttonVisible\" v-on:click=\"detectExpressions\">Turn on ER camera</button>\n  </div>\n</template>\n\n<script>\nimport * as faceapi from \"face-api.js\";\n\nconst minConfidenceFace = 0.5;\nconst faceapiOptions = new faceapi.SsdMobilenetv1Options({ minConfidenceFace });\n\nlet cam;\nlet isRunning = true;\nlet withBoxes = true;\n\nexport default {\n  name: \"LiveVideo\",\n  props: [\"buttonVisible\", \"detectOnLoad\"],\n  metaInfo: {\n    title: \"Live Video\"\n  },\n  data() {\n    return {\n      cam: null,\n      displaySize: null\n    }\n  },\n  mounted() {\n    let loadNet = async () => {\n      let detectionNet = faceapi.nets.ssdMobilenetv1;\n      await detectionNet.load(\"/models\");\n      await faceapi.loadFaceExpressionModel(\"/models\");\n      return detectionNet;\n    };\n\n    const initCamera = async (width, height) => {\n      const video = document.getElementById(\"webcam\");\n      video.width = width;\n      video.height = height;\n\n      this.displaySize = { width: video.width, height: video.height };\n      const canvas = document.getElementById(\"overlay\");\n      faceapi.matchDimensions(canvas, this.displaySize);\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: false,\n        video: {\n          facingMode: \"user\",\n          width: width,\n          height: height\n        }\n      });\n\n      video.srcObject = stream;\n      return new Promise(resolve => {\n        video.onloadedmetadata = () => {\n          resolve(video);\n        };\n      });\n    };\n\n    loadNet()\n      .then(net => {\n        return initCamera(600, 500);\n      })\n      .then(video => {\n        this.cam = video;\n        if (this.detectOnLoad) {\n          this.detectExpressions();\n        }\n      });\n  },\n  methods: {\n    async detectExpressions() {\n\n      setInterval(async () => {\n        // detect expression\n        const result = await faceapi\n          .detectSingleFace(this.cam, faceapiOptions)\n          .withFaceExpressions();\n\n        if (typeof result !== \"undefined\") {\n          const resizedResult = faceapi.resizeResults(result, {\n            width: this.cam.width,\n            height: this.cam.height\n          });\n\n        const canvas = document\n            .getElementById(\"overlay\");\n         canvas\n            .getContext(\"2d\")\n            .clearRect(\n              0,\n              0,\n              canvas.width,\n              canvas.height\n            );\n          faceapi.draw.drawDetections(\n            canvas,\n            resizedResult\n          );\n          faceapi.draw.drawFaceExpressions(\n            canvas,\n            resizedResult,\n            faceapiOptions.minConfidenceFace\n          );\n\n          let happiness = 0,\n            anger = 0,\n            sadness = 0,\n            surprise = 0,\n            fear = 0,\n            disgust = 0;\n          if (result.expressions.hasOwnProperty(\"happy\")) {\n            happiness = result.expressions.happy;\n          }\n          if (result.expressions.hasOwnProperty(\"angry\")) {\n            anger = result.expressions.angry;\n          }\n          if (result.expressions.hasOwnProperty(\"sad\")) {\n            sadness = result.expressions.sad;\n          }\n          if (result.expressions.hasOwnProperty(\"fearful\")) {\n            fear = result.expressions.fearful;\n          }\n          if (result.expressions.hasOwnProperty(\"disgusted\")) {\n            disgust = result.expressions.disgusted;\n          }\n          if (result.expressions.hasOwnProperty(\"surprised\")) {\n            surprise = result.expressions.surprised;\n          }\n\n          // interface responds\n          if (happiness > 0.65) {\n            if (document.getElementById(\"happiness\")) {\n              document.getElementById(\"happiness\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (anger > 0.65) {\n            if (document.getElementById(\"anger\")) {\n              document.getElementById(\"anger\").style.backgroundColor = \"#DCDCDC\";\n            }\n          } else if (sadness > 0.65) {\n            if (document.getElementById(\"sadness\")) {\n              document.getElementById(\"sadness\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (surprise > 0.65) {\n            if (document.getElementById(\"surprise\")) {\n              document.getElementById(\"surprise\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (disgust > 0.65) {\n            if (document.getElementById(\"disgust\")) {\n              document.getElementById(\"disgust\").style.backgroundColor =\n                \"#DCDCDC\";\n            }\n          } else if (fear > 0.65) {\n            if (document.getElementById(\"fear\")) {\n              document.getElementById(\"fear\").style.backgroundColor = \"#DCDCDC\";\n            }\n          }\n        }\n      }, 100);\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\ndiv {\n  height: 100%;\n  position: relative;\n  box-sizing: border-box;\n\n  .cam {\n    overflow: hidden;\n  }\n\n  video {\n    // position: absolute; \n    right: 0; \n    bottom: 0;\n    min-width: 100%; \n    min-height: 100%;\n    width: auto; \n    height: auto; \n    z-index: -100;\n    background-size: cover;\n  }\n\n  #overlay,\n  .overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  button {\n    position: relative;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    border-radius: $br-m;\n  }\n}\n\n</style>"],"sourceRoot":"src/components"}]}