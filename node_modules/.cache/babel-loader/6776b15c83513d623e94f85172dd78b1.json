{"remainingRequest":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/babel-loader/lib/index.js!/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/catangui/Documents/GitHub/er-resistance/src/components/Modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/catangui/Documents/GitHub/er-resistance/src/components/Modal.vue","mtime":1613513801542},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/babel-loader/lib/index.js","mtime":1607551081139},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/cache-loader/dist/cjs.js","mtime":1607551081144},{"path":"/Users/catangui/Documents/GitHub/er-resistance/node_modules/vue-loader/lib/index.js","mtime":1607551087951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLm5vdyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9jYXRhbmd1aS9Eb2N1bWVudHMvR2l0SHViL2VyLXJlc2lzdGFuY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQWlydGFibGUgZnJvbSAiYWlydGFibGUiOwp2YXIgYmFzZSA9IG5ldyBBaXJ0YWJsZSh7CiAgYXBpS2V5OiBwcm9jZXNzLmVudi5WVUVfQVBQX0FJUlRBQkxFX0FQSV9LRVkKfSkuYmFzZShwcm9jZXNzLmVudi5WVUVfQVBQX0FJUlRBQkxFX0JBU0UpOwpleHBvcnQgZGVmYXVsdCB7CiAgbWV0aG9kczogewogICAgYWRkUGVyc3BlY3RpdmU6IGZ1bmN0aW9uIGFkZFBlcnNwZWN0aXZlKCkgewogICAgICB2YXIgY2hlY2tlZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImluaXRpYWxPcGluaW9uIl06Y2hlY2tlZCcpOwogICAgICB2YXIgdGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlOwoKICAgICAgaWYgKCFjaGVja2VkQnV0dG9uICYmICF0ZXh0Q29udGVudCkgewogICAgICAgIC8vIE5vdGhpbmcgaGFzIGJlZW4gY2hlY2tlZCBvciBmaWxsZWQuIFNob3cgZXJyb3Igc3RhdGUKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0YSA9IHt9OwoKICAgICAgICBpZiAodGV4dENvbnRlbnQpIHsKICAgICAgICAgIGRhdGFbIlBvcFVwMiJdID0gdGV4dENvbnRlbnQ7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucG9wVXAyID0gZGF0YVsiUG9wVXAyIl07CiAgICAgICAgfQoKICAgICAgICBpZiAoY2hlY2tlZEJ1dHRvbikgewogICAgICAgICAgZGF0YVsiUG9wVXAxIl0gPSBjaGVja2VkQnV0dG9uLnZhbHVlOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnBvcFVwMSA9IGRhdGFbIlBvcFVwMSJdOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgdGhpcy5zdWJtaXQoZGF0YSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImNsb3NlIiwgdHJ1ZSk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoZGF0YSkgewogICAgICBiYXNlKCdTdXJ2ZXkgUmVzdWx0cycpLmNyZWF0ZShbewogICAgICAgICJmaWVsZHMiOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICJTdWJtaXNzaW9uIElEIjogRGF0ZS5ub3coKQogICAgICAgIH0sIGRhdGEpCiAgICAgIH1dLCBmdW5jdGlvbiAoZXJyLCByZWNvcmRzKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlY29yZC5nZXRJZCgpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIsIHRydWUpOwogICAgfQogIH0sCiAgcHJvcHM6IFsndGl0bGUnXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGFzRXJyb3I6IGZhbHNlCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["Modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,QAAA,MAAA,UAAA;AAEA,IAAA,IAAA,GAAA,IAAA,QAAA,CACA;AACA,EAAA,MAAA,EAAA,OAAA,CAAA,GAAA,CAAA;AADA,CADA,EAIA,IAJA,CAIA,OAAA,CAAA,GAAA,CAAA,qBAJA,CAAA;AAMA,eAAA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,UAAA,aAAA,GAAA,QAAA,CAAA,aAAA,CAAA,sCAAA,CAAA;AACA,UAAA,WAAA,GAAA,QAAA,CAAA,aAAA,CAAA,UAAA,EAAA,KAAA;;AACA,UAAA,CAAA,aAAA,IAAA,CAAA,WAAA,EAAA;AACA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,OAHA,MAIA;AACA,YAAA,IAAA,GAAA,EAAA;;AACA,YAAA,WAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,GAAA,WAAA;AACA,UAAA,YAAA,CAAA,MAAA,GAAA,IAAA,CAAA,QAAA,CAAA;AACA;;AACA,YAAA,aAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,GAAA,aAAA,CAAA,KAAA;AACA,UAAA,YAAA,CAAA,MAAA,GAAA,IAAA,CAAA,QAAA,CAAA;AACA;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,aAAA,MAAA,CAAA,IAAA;AACA;;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,IAAA;AACA,KAtBA;AAuBA,IAAA,MAvBA,kBAuBA,IAvBA,EAuBA;AACA,MAAA,IAAA,CAAA,gBAAA,CAAA,CAAA,MAAA,CAAA,CACA;AACA;AACA,2BAAA,IAAA,CAAA,GAAA;AADA,WAEA,IAFA;AADA,OADA,CAAA,EAOA,UAAA,GAAA,EAAA,OAAA,EAAA;AACA,YAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,KAAA,CAAA,GAAA;AACA;AACA;;AACA,QAAA,OAAA,CAAA,OAAA,CAAA,UAAA,MAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,EAAA;AACA,SAFA;AAGA,OAfA;AAgBA,KAxCA;AAyCA,IAAA,KAzCA,mBAyCA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,IAAA;AACA;AA3CA,GADA;AA8CA,EAAA,KAAA,EAAA,CAAA,OAAA,CA9CA;AA+CA,EAAA,IA/CA,kBA+CA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA;AAnDA,CAAA","sourcesContent":["<template>\n<div class=\"container\">\n  <div class=\"overlay\"></div>\n  <div class=\"modal\">\n    <h2> {{ title }}</h2>\n    <p>Read our privacy policy <a href=\"#\">here</a></p>\n    <form action=\"\">\n      <p>Have you heard of ‘emotion recognition systems’?</p>\n      <div class=\"yn\">\n        <input type=\"radio\" name=\"initialOpinion\" value=\"Yes\">\n        <label>Yes</label>\n      </div>\n      <div class=\"yn\">\n        <input type=\"radio\" name=\"initialOpinion\" value=\"No\">\n        <label>No</label>\n      </div>\n        <p>\n          <label>What do you understand by the term ‘emotion recognition systems’?</label>\n          <textarea rows=\"5\" placeholder=\"Please explain.\"></textarea>\n        </p>\n    </form>\n    <div class=\"button-group\">\n      <button @click=\"close\">Skip</button>\n      <button @click=\"addPerspective\">Add my perspective</button>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport Airtable from \"airtable\";\n\nconst base = new Airtable(\n  {\n    apiKey: process.env.VUE_APP_AIRTABLE_API_KEY\n  }\n).base(process.env.VUE_APP_AIRTABLE_BASE);\n\nexport default {\n  methods: {\n    addPerspective() {\n      const checkedButton = document.querySelector('input[name=\"initialOpinion\"]:checked');\n      const textContent = document.querySelector('textarea').value;\n      if (!checkedButton && !textContent) {\n        // Nothing has been checked or filled. Show error state\n        this.hasError = true;\n      }\n      else {\n        const data = {};\n        if (textContent) {\n          data[\"PopUp2\"] = textContent;\n          localStorage.popUp2 = data[\"PopUp2\"];\n        }\n        if (checkedButton) {\n          data[\"PopUp1\"] = checkedButton.value;\n          localStorage.popUp1 = data[\"PopUp1\"];\n        }\n        console.log(data);\n        this.submit(data);\n      }\n      this.$emit(\"close\", true);\n    },\n    submit(data) {\n        base('Survey Results').create([\n        {\n          \"fields\": {\n            \"Submission ID\": Date.now(),\n            ...data\n          }\n        }\n      ], function(err, records) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n        records.forEach(function (record) {\n          console.log(record.getId());\n        });\n      });\n    },\n    close() {\n      this.$emit(\"close\", true);\n    }\n  },\n  props: ['title'],\n  data() {\n    return {\n      hasError: false\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.modal {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background: $yellow;\n  padding: 1em 2em 2em;\n  border-radius: $br-m;\n  border: 2px solid black;\n  z-index: 2;\n\n  h2 {\n    line-height: 1.5em;\n  }\n\n  a {\n    text-decoration: underline;\n  }\n\n  h3 {\n    text-align: left;\n    font-size: 12px;\n    line-height: 1.7em;\n  }\n\n  form {\n    text-align: left;\n\n    .yn {\n      display: inline-block;\n      margin-bottom: 2rem;\n      width: 40%;\n\n      input {\n        margin-right: 1em;\n\n        &:hover {\n          cursor: pointer;\n        }\n      }\n    }\n\n    p {\n      textarea {\n        display: block;\n        width: 100%;\n        border: 2px solid black;\n        background: $yellow;\n        margin-top: 1em;\n        padding: 0.75em 1em;\n        box-sizing: border-box;\n        font-family: inherit;\n        color: $gray-1;\n      }\n    }\n  }\n\n  div.button-group {\n    margin-top: 2em;\n    display: flex;\n    justify-content: center;\n\n    button {\n      margin-left: 1em;\n    }\n  }\n}\n\n.overlay {\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: #171717;\n    opacity: 0.95;\n    z-index: 2;\n}\n</style>"],"sourceRoot":"src/components"}]}